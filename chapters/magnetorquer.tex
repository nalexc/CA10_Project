\section*{Magnetorqer model}
% The total disturbance torque can now be derived as.... [for disturbances]
% In SD a short description about how many magnetorqers we use and why
% maybe to put the RW and MT in the SD both with general description and model
% ref for magnetorqer: serway and wartz or "Fully magnetic attitude control for spacecraft subject
%to gravity gradient" Rafal
% m is given in the sat body frame and is needed in control frame so we need a rotation 
\nomenclature[S]{$n_{coil}$}{The windings of the coil}
\nomenclature[S]{$I_{coil}$}{The electric current on the coil}
\nomenclature[S]{$\vec A_{coil}$}{The vector perpendicular to the cross-sectional area of the magnetorquer}

Since the primary actuators for the satellite are chosen to be reaction wheels, the magnetorqers will be used for desaturation of the reaction wheels. The satellite contains onboard four magnetorqers mounted perpendicular to each other. 

Having a solenoid onboard of the satellite, referred as a magnetorqer through which the current could be controlled and hence the dipole moment.

The interaction of the dipole with the magnetic field of the Earth will result in a torque that will be perpendicular to the magnetic field vector according to the following equation \cite{SADC}:
\begin{flalign}
   \vec N_{mt} = \vec m \times \vec B
	\label{eq:NT}
\end{flalign} 
where $\vec N$ is the torque produce by the magnetorquer and will be the torque that will influence the satellite dynamics, $\vec B$ is the vector of the magnetic field of the Earth and $\vec m $ is the magnetic dipole moment generated by the magnetorquer.

The magnetic moment $\vec m$ is given by \cite{MagMom}:
\begin{flalign}
	\vec m = n_{coil} \ I_{coil} \ \vec A_{coil}
	\label{eq:mm}
\end{flalign} 
where $n_{coil}$ is the windings of the coil, $I_{coil}$ is the electric current on the coil and $\vec A_{coil}$ is the vector perpendicular to the cross-sectional area of the magnetorquer.

Using \ref{eq:NT} and \ref{eq:mm} and taking the magnitude, the applied torque on the satellite is \cite{SJ}:
\begin{flalign}
	\vec N_{mt} = n_{coil} \ \rvert I_{coil}\rvert \ \rvert \vec A_{coil}\rvert \ |\vec B| \sin (\theta)
	\label{eq:ft}
\end{flalign} 
where $\sin (\theta)$ is the angle between the area $A_{coil}$ and the magnetic field vector $\vec B$.

Furthermore, the resistance of the magnetorqer which is a function of the temperature of the coil given as an input, can be computed as
\begin{flalign}
R_{mt} = \dfrac{nC  \rho_{mt} }{A_{wire}} = \dfrac{nC \rho_0(1+\alpha_0(T_{mt} - T_0))}{A_{wire}}
\label{eq:rt}
\end{flalign} 
where \\
$R_{mt}$ is the resistance of the magnetorquer \\
$n$ is the number of windings \\ 
$C$ is the wire circumference  \\
$A_{wire}$ is the wire cross-sectional area  \\
$\rho_0$ is the resistivity of copper  \\
$\alpha_0$ is the coefficient of resistivity temperature   \\
$T_{mt}$ is the temperature given as an input   \\
$T_0$ is the resistivity base temperature  \\

Using the computed resistance the current is found by dividing the voltage by the resistance of the magnetorquer. Next, in order to find the magnetic moment $m$, the current is multiplied by the number of windings and the area of the wire. For finding the torque that acts on the satellite, the magnetic moment is multiplied by the coil normal and a cross-product is used between this multiplication and the magnetic field of the Earth.

The design of the magnetorquer is described in appendix \ref{chap:F}.