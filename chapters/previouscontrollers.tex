\chapter{Torque demand source}

In the following chapter will be discussed shortly two attitude controller designs that are based on previous work. The two controllers calculate a torque demand that has to be produced from the motors. The first controller is based on the linearized model \eqref{eq:lele}, and thus is characterized as linear state feedback control, while the second one is based on the non-linear dynamics \eqref{eq:seom} creating a sliding manifold, a hyperplane, such that when the states are on the manifold, will converge to the desired reference. The non-linear controller is called Sliding Mode Control (SMC).



\nomenclature[A]{\textbf{SMC}}{Sliding Mode Control}
  
 \subsection{Torque demand based on linear controller}
 
Since the norm of $ \vec{ {\bar{\omega}}} $ is known and equal to the orbital angular velocity ($\approx 0.0011$) comparing this value to $\frac{1}{2}$,becomes small, thus \eqref{eq:lele} can be simplified to 
\begin{flalign}
	\begin{bmatrix}
		\vec{ \dot {\tilde{q}}(t) } \\
		\vec{ \dot {\tilde{\omega}}(t) }
	\end{bmatrix} 	
	= 
	\begin{bmatrix}
		\underline{ 0}_{(3\times3)} &	\frac{1}{2} \underline{\vec 1}_{(3\times3)} \\
		\underline{ 0}_{(3\times3)} &	\underline{ 0}_{(3\times3)}
	\end{bmatrix} 
	\begin{bmatrix}
		\vec{  {\tilde{q}}(t) } \\
		{  {\tilde{\vec \omega}}(t) }
	\end{bmatrix} 	
	-
	\begin{bmatrix}
		\underline{\vec 0}_{(3\times3)} \\
		{\underline I_{s}^{-1}}
	\end{bmatrix} 	
	\vec {\tilde N_{ctrl}}
	\label{eq:lelele}
\end{flalign}
Three equal subsystems can be derived from \eqref{eq:lelele} as
 \begin{flalign}
 	\begin{bmatrix}
 		 \dot { \tilde {q_{i}}} \\
 		 \dot { \tilde { \omega_{i}}}
 	\end{bmatrix} 	
 	= 
 	\begin{bmatrix}
 		 0&	\frac{1}{2}  \\
 		 0 &	 0
 	\end{bmatrix} 
 	\begin{bmatrix}
 		 \tilde{q_{i}}(t)  \\
 		  \tilde{\omega_{i}}(t) 
 	\end{bmatrix} 	
 	-
 	\begin{bmatrix}
 		0 \\
 		 I_{i,s}^{-1}
 	\end{bmatrix} 	
 	\tilde{N_{i}}
 	\label{eq:subsys}
 \end{flalign}
with $i = 1, 2, 3 $. The control torque was defined by the state feedback law as 
\begin{flalign}
	N_{i}	
	= 
	-
	\begin{bmatrix}
	k_{1} &	k_{2} 	
	\end{bmatrix} 
	\begin{bmatrix}
		\tilde{q_{i}}(t)  \\
		\tilde{\omega_{i}}(t) 
	\end{bmatrix} 	
	\label{eq:inputtorque}
\end{flalign}
leading to a second order closed loop system calculated as $det(s\underline{I} - (\underline{A} - \underline{BK}) )$. Identifying  this with a general second order equation $s^{2}+2\zeta\omega_{n}s+\omega_{n}^{2}$, with $\zeta$ be the dumping factor which was chosen to be equal to 1 leading to an over dumped response and $\omega_{n}$  the natural frequency $\omega_{n} =  \frac{2\pi}{60/0.35} $ with 60 be the value of the chosen rise time, the controller gains was derived.

\subsection{Torque demand based on non-linear controller}